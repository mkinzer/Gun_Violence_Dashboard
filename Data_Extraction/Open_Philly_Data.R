
# The following data comes from OpenDataPhilly.org

# Dataset load
philly.gv <- read.csv("https://phl.carto.com/api/v2/sql?q=SELECT+*,+ST_Y(the_geom)+AS+lat,+ST_X(the_geom)+AS+lng+FROM+shootings&filename=shootings&format=csv&skipfields=cartodb_id")
philly.gv$date_ <- ymd(philly.gv$date_) # Convert date to proper format

philly.gv$lng <- round(philly.gv$lng,2) # Round longitude and latitude to 2 digits
philly.gv$lat <- round(philly.gv$lat,2)


# Create a continuous palette function
pal <- colorNumeric(
  palette = "magma",
  domain = philly.gv$n
)
